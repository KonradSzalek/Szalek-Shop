@model szalkszop.ViewModels.ProductDetailViewModel
@{
	ViewBag.Title = "Details";
	Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Details</h2>

<div class="vert-offset-bottom-1 col-sm-9">
	<div id="myCarousel" class="carousel slide" data-ride="carousel">

		<!-- Indicators -->

		<ol class="carousel-indicators">
			@for (int i = 0; i < Model.ProductImagesDto.Count(); i++)
			{
				if (i == 0)
				{
					<li data-target="#myCarousel" data-slide-to="@i" class="active"></li>
				}

				else
				{
					<li data-target="#myCarousel" data-slide-to="@i"></li>
				}
			}
		</ol>


		<!-- Wrapper for slides -->
		<div class="carousel-inner">
			@foreach (var image in Model.ProductImagesDto)
			{
				if (image == Model.ProductImagesDto.First())
				{
					<div class="item active">
						<img id="myImg" img src="~/Images/@image.ImageName" max-height="300px" alt="@image.ImageName">
					</div>
				}

				else
				{
					<div class="item">
						<img id="myImg1" img src="~/Images/@image.ImageName" alt="@image.ImageName">
					</div>
				}
			}
		</div>

		<!-- Left and right controls -->
		<a class="left carousel-control" href="#myCarousel" data-slide="prev">
			<span class="glyphicon glyphicon-chevron-left"></span>
			<span class="sr-only">Previous</span>
		</a>
		<a class="right carousel-control" href="#myCarousel" data-slide="next">
			<span class="glyphicon glyphicon-chevron-right"></span>
			<span class="sr-only">Next</span>
		</a>
	</div>

	<div class="caption">
		<h3>@Model.Name</h3>
		<h4>Price: @Model.Price €</h4>
		<p>Description: @Model.Description</p>
		<p>Amount in stock: @Model.AmountInStock</p>
		<p>Date of adding: @Model.DateOfAdding.ToString("dd/MM/yyyy")</p>
		<p>Product ID: @Model.Id</p>
		<p><a href="#" class="btn btn-primary" role="button">To Cart</a></p>
		<a data-toggle="modal" href="#myModal">Open Modal</a>
	</div>
</div>

<div id="myModal" class="modal">
	<span class="close">&times;</span>
	<img class="modal-content" id="img01">
	<div id="caption"></div>
</div>

@section scripts
{
	<script>
		$(document).ready(function () {
			$("#pop").click(function () {
				$('#myModal').modal('show');
			});
		});

		// Get the modal
		var modal = document.getElementById('myModal');

		// Get the image and insert it inside the modal - use its "alt" text as a caption
		var img = document.getElementById('myImg');
		var modalImg = document.getElementById("img01");
		var captionText = document.getElementById("caption");
		img.onclick = function () {
			modal.style.display = "block";
			modalImg.src = this.src;
			captionText.innerHTML = this.alt;
		}

		// Get the <span> element that closes the modal
		var span = document.getElementsByClassName("close")[0];

		// When the user clicks on <span> (x), close the modal
		span.onclick = function () {
			modal.style.display = "none";
		}

	</script>
}



